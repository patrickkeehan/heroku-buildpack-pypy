# setting worker_processes to CPU core count
worker_processes      1;
daemon off;

http {
  include             mime.types;
  default_type        application/octet-stream;
  sendfile            on;
  keepalive_timeout   65;
  gzip  on;

  server {
    listen            <%= ENV['PORT'] %>;
    server_name       localhost;

    # Status. /status.html uses /status
    location / {
		proxy_pass_header Server;
        proxy_set_header Host $http_host;
		proxy_redirect off;
		proxy_set_header X-Real-IP $remote_addr;
		proxy_set_header X-Scheme $scheme;
		proxy_connect_timeout 10;
		proxy_read_timeout 10;
		proxy_pass http://127.0.0.1:8000/;
    }
  }
}
